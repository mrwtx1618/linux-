

第二部分 Linux文件、目录与磁盘格式

第6章 Linux的文件权限与目录配置

·请说明/bin与/usr/bin目录所放置的执行文件有何不同之处。

答：/bin主要放置在开机时，以及进入单用户维护模式后还能够被操作的命令，至于/usr/bin则是大部分软件提供的命令放置处。主要区别在于是否与开机过程有关。 


·请说明/bin与/sbin目录所放置的执行文件有何不同之处。

答：/bin放置的是一般用户惯用的命令，至于/sbin则是系统管理员才会使用到的命令，主要包括开机、修复、还原系统所需要的命令。不过/bin与/sbin都与开机、单人维护模式有关。更多的执行文件会被放置到/usr/bin及/usr/sbin底下。 


·哪几个目录不能与根目录（/）放置到不同的分区中？并说明该目录所放置的数据是什么。

答：/etc(配置文件), /bin(一般身份可用的重要执行文件), /dev(设备文件), /lib(执行文件所需的函数库与核心模块等), /sbin(重要的系统执行文件，只有系统管理员可用) 


·试说明为何根目录要小一点比较好。另外在分区时，为什么/home、/usr、/var、/tmp最好与根目录放到不同的分区？试说明可能的原因为何（由目录放置数据的内容谈起）。

答：根据FHS的说明，越小的根目录放置的数据较少且集中，可避免较多的错误。因为越大的分区你会放入越多的数据，如此一来根目录所在分区就可能会有较多发生错误的机会。至于/home(用户主目录), /usr(软件资源), /var(常态性变动的数据), /tmp(系统暂存数据)中，因为数据量较大或者是读取频率较高，或者是不明的使用情况较多，因此建议不要与根目录放在一起，也会有助于系统安全。 


·早期的UNIX系统文件名最多允许14个字符，而新的UNIX与Linux系统中，文件名最多可以容许几个字符？

答：由于使用Ext2/Ext3文件系统，单一档名可达 255字符，完整文件名 (包含路径)可达 4096 个字符。


·当一个文件权限为 -rwxrwxrwx则表示这个文件的意义是什么？

答：任何人皆可读取、修改或编辑、可以执行，但不一定能删除。 


·我需要将一个文件的权限改为-rwxr-xr—，请问该如何执行命令？

答：chmod 754 filename或 chmod u=rwx,g=rx,o=r filename 


·若我需要更改一个文件的所有者与用户组，该用什么命令？

答：chown, chgrp 


·请问下面的目录主要放置什么数据？

/etc/, /etc/init.d, /boot, /usr/bin, /bin, /usr/sbin, /sbin, /dev, /var/log

答：/etc/：系统主要的配置文件几乎都放置在这个目录内，例如人员的账号密码文件、各种服务的起始文件等；/etc/init.d：所有服务的默认启动脚本都是放在这个目录中；/boot：主要放置在开机会使用到的文件，包括Linux内核文件以及开机菜单与开机所需配置文件等；/usr/bin：绝大部分的用户可使用命令都在这里，与/bin不同的是这些命令与开机过程无关；/bin：主要放置在开机时，以及进入单用户维护模式后还能够被操作的命令；/usr/sbin：非系统正常运行所需要的系统命令，最常见的就是某些网络服务器软件的服务命令；/sbin：主要放置开机过程中所需要的命令，里面包括了开机、修复、还原系统所需要的命令，只有系统管理员能使用；/dev：在Linux系统上，任何设备与接口设备都是以文件的形式存在与这个目录当中；/var/log：主要放置登录文件，记录登录信息。


·若一个文件的文件名开头为“.”，例如.bashrc这个文件，代表什么？另外任何显示出这个文件名与它的相关属性？

答：有“.”为开头的为隐藏文件，需要使用 ls -a这个 -a的选项才能显示出隐藏文件的内容，而使用 ls -al才能显示出属性。 
第7章 Linux文件与目录管理

·什么是绝对路径与相对路径

答：对于Linux，绝对路径的写法为由 /开始写，相对路径则不由 /开始写。此外，相对路径为相对於目前工作目录的路径。


·如何更改一个目录的名称？例如由/home/test变为/home/test2。

答：mv /home/test /home/test2 


·PATH这个环境变量的意义是什么？

答：这个是用来指定运行档运行的时候，命令搜寻的目录路径。 


·umask有什么用处与优点？

答：umask用来指定目前用户在新建文件或目录时候的权限默认值，因此它可以增减一些权限，因此，适当的定义 umask有助於系统的安全，因为他可以用来创建默认的目录或文件的权限。 


·当一个用户的umask分别为033与044，他所建立的文件与目录的权限是什么？

答：在 umask为 033时，则默认是拿掉 group与 other的 w(2)x(1)权限，因此权限就成为“文件 -rw-r--r--，目录 drwxr--r-- ”而当 umask 044时，则拿掉 r的属性，因此就成为“文件 -rw--w--w-，目录 drwx-wx-wx”。 


·什么是SUID？

答：SUID是一种文件特殊权限，SUID有这样的限制于功能：SUID权限仅对二进制程序有效；执行者对于该程序需要具有x的可执行权限；本权限仅在执行改程序的过程中有效；执行者将具有该程序所有者的权限。

·当我要查询/usr/bin/passwd这个文件的传统权限、文件类型与文件的隐藏属性，可以使用什么命令来查询？

答：ls -alfilelsattr

·尝试用find找出目前Linux系统中所有具有SUID的文件有哪些。

答：find / -perm +4000 -print 


·找出/etc下面，文件大小介于50KB到60KB之间的文件，并且将权限完整地列出（ls-l）。

答：find /etc -size +50k -a -size -60k -exec ls -l {} \;

·找出/etc下面，文件容量大于50KB且文件所有者不是root的文件名，且将权限完整地列出（ls-l）。

答：find /etc -size +50k -a ! -user root -exec ls -ld {} \;

·找出/etc下面，容量大于1500KB以及容量等于0的文件。

答：find /etc -size +1500k -o -size 0

第8章 Linux磁盘与文件系统管理

·如果由于你的主机磁盘容量不够大，你想要增加一块新磁盘，并将该磁盘分区成单一分区，且将该分区挂载到/home目录，你该如何处置？

答：安装硬盘：关掉 Linux主机电源，将硬盘放入主机后插好硬盘的扁平电缆与电源线，重新启动电源；磁盘分区：将整个磁盘分区成单一主要分割槽，类似 /dev/sdb1占有全部容量；格式化：透过 mkfs -t ext3 来格式化；数据迁移：由于原本的 /home还会有数据存在，因此你可以 mount /dev/sdb1 /mnt，再将 /home 的数据复制到 /mnt/中，例如：“cp -a /home/* /mnt ”即可。复制完毕后卸除 /home以及 /mnt；重新挂载：编辑 /etc/fstab，将 /home所在的 filesystem装置改为 /dev/sdb1之类的新分割槽，然后 mount -a测试看看是否正确，如果正确的话，才是顺利结束了这次的动作。


·如果扇区/dev/hda3有问题，偏偏它是被挂载上的，请我我要如何修理此扇区？

答：先将扇区解挂再检修。即先执行umount /dev/hda3再执行fsck /dev/hda3 


·我们经常说，开机的时候发现硬盘有问题，请问，这个问题的产生是文件系统的损坏还是硬盘的损坏？

答：如果某个 filesystem里面，由于操作不当，可能会造成 Superblock数据的损毁，或者是 inode的架构损毁，或者是 block area的记录遗失等等，这些问题当中，其实硬盘还是好好的，不过，在硬盘上面的文件系统则已经无法再使用。一般来说，我们的 Linux很少会造成 filesystem的损毁，所以，发生问题时，很可能整个硬盘都损毁了。但是，如果您的主机常常不正常断电，那么，很可能硬盘是没问题的，但是，文件系统则有可能损毁。此时，重建文件系统 (reinstall)即可，不需要换掉硬盘。


·当我有两个文件，分别是file1与file 2，这两个文件互为hard link的文件，请问，若我将file 1删除，然后再以类似vi的方式重新新建一个名为file 1的文件，则file 2的内容是否会被改动？

答：当我删除 file1之后， file2 则为一个正规文件，并不会与他人共同分享同一个 inode与 block ，因此，当我重新创建一个档名为 file1时，他所利用的 inode 与 block都是由我们的 filesystem 主动去搜寻 meta data，找到空的 inode 与 block来创建的， 与原本的 file1并没有任何关联性。所以，新建的 file1 并不会影响 file2。

